<div class="modal-header">
  <h5 class="modal-title">
    <span>
      <img
        id="profile-avatar-preview"
        class="<%= post.User.avatar ? 'rounded me-2' : 'd-none' %>"
        src="<%= post.User.avatar %>"
        alt="Avatar"
        style="width: 50px; height: 50px;"
      >
      <%= `${post.User.firstName} ${post.User.lastName}  wrote` %>
    </span>
  </h5>

  <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>

<div class="modal-body">
  <div class="container">
    <!-- post contents -->
    <h1 class="mb-3 text-center"><%= post.title %></h1>
    <p class="mb-3"><%= post.content%></p>

    <!-- comment input -->
    <form id="comment-form" novalidate>

      <div class="form-floating">
        <textarea class="form-control"
        placeholder="Leave a comment here"
        id="comment"
        name="content"
        style="height: 100px"
        type="text"
        data-error-ref="content"
        required
        ></textarea>
        <label for="comment">Comments</label>
        <div class="invalid-feedback"></div>
      </div>
    </form>

    <button type="button" class="reply-btn btn btn-primary btn-lg mt-3" data-method="POST" data-url="/api/posts/<%= post.id %>/reply">Reply</button>
    <!-- comments exhibition -->
    <% if (post.Comments.length > 0) { %>
      <ul id="comment-list" class="list-group">
        <% post.Comments.forEach(function(item) { %>
          <li class="list-group-item" data-ParentId="null">

            <!-- inside 1st-layer-comment, there are contents, second-layer-reply-btn and 3nd-layer -->
            <div class="each-comment">
              <div>
                <span>
                  <img
                    id="profile-avatar-preview"
                    class="<%= item.user.avatar ? 'rounded me-2' : 'd-none' %>"
                    src="<%= item.user.avatar %>"
                    alt="Avatar"
                    style="width: 30px; height: 30px;"
                  >
                </span>
                <p class="currentComment-name">
                  <%= `${item.user.firstName} ${item.user.lastName} : ` %>
                </p>
                <div class="each-comment-content">
                  <p>
                    <%= item.content %>
                  </p>
                  <a class="second-layer-reply-btn" data-url="/reply/3-layer-comment/:id">reply</a>
                </div>
              </div>

<!-- 3rd layer comment -->
              <div class="third-layer-comment-container">
                <ul class="third-layer-comment-list list-group">
                  <li id="ejs-current-comment-id" class="list-group-item">
                    <article>
                      <div>avatar</div>
                      <a href="#ejs-current-comment-id--which-is-ParentId"></a><p>test</p>
                    </article>
                  </li>

                  <li class="list-group-item">
                    <article>
                      <div>avatar</div>
                      <a href="#ejs-current-comment-id--which-is-ParentId"></a><p>test</p>
                    </article>
                  </li>
                </ul>
              </div>
<!-- END of 3rd layer comment -->

            </div>
          </li>

        <% }) %>
      </ul>
    <% } else { %>
      <div>No Comment</div>
    <% } %>
  </div>
</div>
